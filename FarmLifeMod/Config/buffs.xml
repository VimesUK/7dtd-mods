<!--
attFortitude,
attStrength,
attPerception
attIntellect
attAgility

onSelfBuffStart = 0
onSelfBuffUpdate,  Frame-based, not 1/s
onSelfBuffFinish,  Runs when the duration of a buff has run out.
onSelfBuffRemove,  When the buff is being removed by any source. Can not be used for a buff to restart itself.
onSelfBuffStack    When the buff is refreshed/extended/stacked... anything but "ignore"

Stat / cvar comparison operators:
    None,
    Equals,
    NotEquals,
    Less, LessThan, LT,
    Greater, GreaterThan, GT,
    LessOrEqual, LessThanOrEqualTo, LTE,
    GreaterOrEqual, GreaterThanOrEqualTo, GTE

-->
<configs>

  <append xpath="/buffs">
    <!-- Beer -->
    <buff name="Beer Lover" description_key="I've been drinking some craft quality beer." icon="ui_game_symbol_beer">
      <damage_type value="disease" />
      <stack_type value="duration" />
      <duration value="30" />

      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message="I love tasty craft beer"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="beerBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="beerBuffCount" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="beerBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="beerBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" effect_name="Drunk" />
      </effect_group>

      <!-- Screen effect and messages  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="This is amazing beer"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.07" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="Beer 30 where are my friends?"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.08" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="Equals" value="3"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="I had a rough day"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.09" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="Equals" value="4"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="I like this beer...too much..."/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.1" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="Equals" value="5"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="I should probably stop..."/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.22" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="Equals" value="6"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="Ok that was too many..."/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.33" effect_name="Drunk"/>
      </effect_group>
      <!-- Screen effect  -->
      <!-- Idiot  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="GTE" value="7"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="I'm totally wasted!"/>
        <triggered_effect trigger="onSelfBuffStack" action="Ragdoll" target="self" duration="1" />
      </effect_group>

      <!-- Buffs -->
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="LTE" value="2"/>
        <passive_effect name="EntityDamage" operation="perc_add" value="3">
          <requirement name="HoldingItemHasTags" tags="fists" />
        </passive_effect>
        <passive_effect name="StaminaChangeOT" operation="perc_add" value="0.35" />
        <passive_effect name="BuffResistance" operation="base_add" value="1" tags="buffInjuryStunned1" />
      </effect_group>
      <!-- Buffs -->

      <!-- Debuff  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="GTE" value="3"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="GTE" value="4"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attPerception" />
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="beerBuffCount" operation="GTE" value="6"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attPerception" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="3" tags="attFortitude" />
        <passive_effect name="BuffResistance" operation="base_subtract" value="10" tags="buffInjuryStunned1" />
        <passive_effect name="BuffResistance" operation="base_subtract" value="10" tags="buffInjuryStunned2" />
      </effect_group>
      <!-- Debuff  -->
    </buff>

    <!-- Wine -->
    <buff name="Wine Connoisseur" description_key="A nice big wine with excellent heft" icon="ui_game_symbol_beer">
      <damage_type value="disease" />
      <stack_type value="duration" />
      <duration value="30" />

      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message="I thought this wine was dark, dusky, and supple"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="wineBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="wineBuffCount" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="wineBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="wineBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" effect_name="Drunk" />
      </effect_group>

      <!-- Screen effect and messages  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="Just as the cork protects the wine.."/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.07" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="Cork Master will hope to protect the wine club.."/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.08" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="Equals" value="3"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="from the forces of metaphorical oxidation!"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.09" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="Equals" value="4"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="Is this an Australian Shiraz?"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.1" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="Equals" value="5"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="These tannins are affecting me"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.22" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="Equals" value="6"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="When in Rome!"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.33" effect_name="Drunk"/>
      </effect_group>
      <!-- Screen effect  -->
      <!-- Idiot  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="GTE" value="7"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="That wine spent less time in the bottle than in your mouth!"/>
        <triggered_effect trigger="onSelfBuffStack" action="Ragdoll" target="self" duration="1" />
      </effect_group>

      <!-- Buffs -->
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="LTE" value="2"/>
        <passive_effect name="PerkLevel" operation="base_add" value="1" tags="PerkBetterBarter" />
        <passive_effect name="PerkLevel" operation="base_add" value="1" tags="perkCharismaticNature" />
      </effect_group>
      <!-- Buffs -->

      <!-- Debuff  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="GTE" value="3"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="GTE" value="4"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attPerception" />
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="wineBuffCount" operation="GTE" value="6"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attPerception" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="3" tags="attFortitude" />
        <passive_effect name="BuffResistance" operation="base_subtract" value="10" tags="buffInjuryStunned1" />
        <passive_effect name="BuffResistance" operation="base_subtract" value="10" tags="buffInjuryStunned2" />
      </effect_group>
      <!-- Debuff  -->
    </buff>

    <!-- Mixed Drink -->
    <buff name="Mixed Drink" description_key="This screwdrive has a big handle." icon="ui_game_symbol_beer">
      <damage_type value="disease" />
      <stack_type value="duration" />
      <duration value="30" />

      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message="Lets get this party started boys"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="mixedDrinkBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="mixedDrinkBuffCount" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="mixedDrinkBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="mixedDrinkBuffCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" effect_name="Drunk" />
      </effect_group>

      <!-- Screen effect and messages  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="Did you see that one over there?"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.07" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="I should go talk to them"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.08" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="Equals" value="3"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="Hey, whats you're symbol?"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.09" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="Equals" value="4"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="I bet you like to..."/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.1" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="Equals" value="5"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="Listen, you don't know me but I'm definitely in love"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.22" effect_name="Drunk"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="Equals" value="6"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="You really must marry me"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" intensity="0.33" effect_name="Drunk"/>
      </effect_group>
      <!-- Screen effect  -->
      <!-- Idiot  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="GTE" value="7"/>
        <triggered_effect trigger="onSelfBuffStack" action="ShowToolbeltMessage" message="I'll blackout and puke now, sorry about the shoes"/>
        <triggered_effect trigger="onSelfBuffStack" action="Ragdoll" target="self" duration="1" />
      </effect_group>

      <!-- Buffs -->
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="LTE" value="2"/>
        <passive_effect name="AttributeLevel" operation="base_add" value="1" tags="attStrength,attPerception" />
      </effect_group>
      <!-- Buffs -->

      <!-- Debuff  -->
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="GTE" value="3"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="GTE" value="4"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attPerception" />
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="mixedDrinkBuffCount" operation="GTE" value="6"/>
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attIntellect" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="1" tags="attPerception" />
        <passive_effect name="AttributeLevel" operation="base_subtract" value="3" tags="attFortitude" />
        <passive_effect name="BuffResistance" operation="base_subtract" value="10" tags="buffInjuryStunned1" />
        <passive_effect name="BuffResistance" operation="base_subtract" value="10" tags="buffInjuryStunned2" />
      </effect_group>
      <!-- Debuff  -->
    </buff>
  </append>

<!--
  <append xpath="/buffs/buff[@name='buffStatusCheck']">
    <effect_group>
      <requirement name="CVarCompare" cvar="_notAlerted" operation="Equals" value="1" />
      <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="self" buff="Tracked" />
    </effect_group>

    <effect_group>
      <requirement name="CVarCompare" cvar="_notAlerted" operation="Equals" value="0" />
      <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="self" buff="Tracked" />
    </effect_group>
  </append>

  <buff name="Tracked" description_key="You are being tracked!">
    <duration value="99999" />
    <effect_group>
      <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message="You are being tracked."/>
      <triggered_effect trigger="onSelfBuffRemove" action="ShowToolbeltMessage" message="You are clear now."/>
    </effect_group>
  </buff> -->

</configs>
